### Obtain access token via Client Credentials for writer client (has roles: reader, writer)
POST http://localhost:8080/realms/sts-realm/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type=client_credentials&client_id=sts-api-writer&client_secret=writer-secret

> {%
  const raw = response.body;
  const body = (typeof raw === 'string') ? JSON.parse(raw) : raw;
  if (body && body.access_token) {
    client.global.set('access_token', body.access_token);
  }
  client.test('Writer token acquired', function () {
    client.assert(response.status === 200, 'Expected 200 OK');
    client.assert(!!client.global.get('access_token'), 'access_token was stored');
  });
%}

### Obtain access token via Client Credentials for reader client (has roles: reader only)
POST http://localhost:8080/realms/sts-realm/protocol/openid-connect/token
Content-Type: application/x-www-form-urlencoded

grant_type=client_credentials&client_id=sts-api-reader&client_secret=reader-secret

> {%
  const raw = response.body;
  const body = (typeof raw === 'string') ? JSON.parse(raw) : raw;
  if (body && body.access_token) {
    client.global.set('access_token', body.access_token);
  }
  client.test('Reader token acquired', function () {
    client.assert(response.status === 200, 'Expected 200 OK');
    client.assert(!!client.global.get('access_token'), 'access_token was stored');
  });
%}
